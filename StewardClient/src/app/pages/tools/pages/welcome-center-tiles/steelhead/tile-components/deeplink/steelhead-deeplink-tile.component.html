<form [formGroup]="formGroup" class="sf-wrapper">
  <div class="sf-vertical">
    <steelhead-general-tile [formControl]="formControls.baseTile"></steelhead-general-tile>

    <mat-form-field class="sf-default-hint" appearance="fill">
      <mat-label>Select Destination Type</mat-label>
      <mat-select [formControl]="formControls.destinationType">
        <mat-option *ngFor="let type of destinationType" [value]="type">
          {{ type | deppoh }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <!-- Racers Cup Destination -->
    <ng-container *ngIf="formControls.destinationType.value === destinationTypes.RacersCup">
      <ng-container *waitForMonitor="referenceDataMonitor">
        <mat-form-field class="sf-default-hint" appearance="fill">
          <mat-label>Select Series</mat-label>
          <mat-select [formControl]="formControls.racersCupSeries">
            <mat-option *ngFor="let serie of racersCupSeries | keyvalue" [value]="serie.key">
              {{ serie.value | humanize }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </ng-container>
    </ng-container>
    <!-- Builders Cup Destination -->
    <ng-container *ngIf="formControls.destinationType.value === destinationTypes.BuildersCup">
      <ng-container *waitForMonitor="referenceDataMonitor">
        <mat-form-field class="sf-default-hint" appearance="fill">
          <mat-label>Select Setting Type</mat-label>
          <mat-select [formControl]="formControls.buildersCupSettingType">
            <mat-option *ngFor="let setting of buildersCupSetting" [value]="setting">
              {{ setting }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <!-- Only Homepage settings does not have championship dropdown -->
        <ng-container
          *ngIf="formControls.buildersCupSettingType.value !== buildersCupSettingTypes.Homepage"
        >
          <mat-form-field class="sf-default-hint" appearance="fill">
            <mat-label>Select Championship</mat-label>
            <mat-select [formControl]="formControls.buildersCupChampionship">
              <mat-option
                *ngFor="let championship of buildersCupChampionships | keyvalue"
                [value]="championship.key"
              >
                {{ championship.value | humanize }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
        <ng-container
          *ngIf="formControls.buildersCupSettingType.value === buildersCupSettingTypes.Ladder"
        >
          <mat-form-field class="sf-default-hint" appearance="fill">
            <mat-label>Select Ladder</mat-label>
            <mat-select [formControl]="formControls.buildersCupLadder">
              <mat-option *ngFor="let ladder of buildersCupLadders | keyvalue" [value]="ladder.key">
                {{ ladder.value | humanize }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
        <ng-container
          *ngIf="formControls.buildersCupSettingType.value === buildersCupSettingTypes.Series"
        >
          <mat-form-field class="sf-default-hint" appearance="fill">
            <mat-label>Select Series</mat-label>
            <mat-select [formControl]="formControls.buildersCupSeries">
              <mat-option *ngFor="let serie of buildersCupSeries | keyvalue" [value]="serie.key">
                {{ serie.value | humanize }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
      </ng-container>
    </ng-container>
    <!-- Rivals Destination -->
    <ng-container *ngIf="formControls.destinationType.value === destinationTypes.Rivals">
      <ng-container *waitForMonitor="referenceDataMonitor">
        <mat-form-field class="sf-default-hint" appearance="fill">
          <mat-label>Select Setting Type</mat-label>
          <mat-select [formControl]="formControls.rivalsSettingType">
            <mat-option *ngFor="let setting of rivalsSetting" [value]="setting">
              {{ setting }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <!-- Only Homepage settings does not have category dropdown -->
        <ng-container *ngIf="formControls.rivalsSettingType.value !== rivalsSettingTypes.Homepage">
          <mat-form-field class="sf-default-hint" appearance="fill">
            <mat-label>Select Category</mat-label>
            <mat-select [formControl]="formControls.rivalsCategory">
              <mat-option
                *ngFor="let rivalsCategory of rivalsCategories | keyvalue"
                [value]="rivalsCategory.key"
              >
                {{ rivalsCategory.value | humanize }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
        <ng-container *ngIf="formControls.rivalsSettingType.value === rivalsSettingTypes.Event">
          <mat-form-field class="sf-default-hint" appearance="fill">
            <mat-label>Select Event</mat-label>
            <mat-select [formControl]="formControls.rivalsEvent">
              <mat-option
                *ngFor="let rivalsEvent of rivalsEvents | keyvalue"
                [value]="rivalsEvent.key"
              >
                {{ rivalsEvent.value | humanize }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
      </ng-container>
    </ng-container>
    <!-- Showroom Destination -->
    <ng-container *ngIf="formControls.destinationType.value === destinationTypes.Showroom">
      <ng-container *waitForMonitor="referenceDataMonitor">
        <mat-form-field class="sf-default-hint" appearance="fill">
          <mat-label>Select Setting Type</mat-label>
          <mat-select [formControl]="formControls.showroomSettingType">
            <mat-option *ngFor="let setting of showroomSetting" [value]="setting">
              {{ setting }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <ng-container *ngIf="formControls.showroomSettingType.value === showroomSettingTypes.Car">
          <mat-form-field class="sf-default-hint" appearance="fill">
            <mat-label>Select Car</mat-label>
            <mat-select [formControl]="formControls.showroomCar">
              <mat-option
                *ngFor="let showroomCar of showroomCars | keyvalue"
                [value]="showroomCar.key"
              >
                {{ showroomCar.value | humanize }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
        <ng-container
          *ngIf="formControls.showroomSettingType.value === showroomSettingTypes.Manufacturer"
        >
          <mat-form-field class="sf-default-hint" appearance="fill">
            <mat-label>Select Manufacturer</mat-label>
            <mat-select [formControl]="formControls.showroomManufacturer">
              <mat-option
                *ngFor="let showroomManufacturer of showroomManufacturers | keyvalue"
                [value]="showroomManufacturer.key"
              >
                {{ showroomManufacturer.value | humanize }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
      </ng-container>
    </ng-container>
    <!-- Store Destination -->
    <ng-container *ngIf="formControls.destinationType.value === destinationTypes.Store">
      <ng-container *waitForMonitor="referenceDataMonitor">
        <mat-form-field class="sf-default-hint" appearance="fill">
          <mat-label>Select Setting Type</mat-label>
          <mat-select [formControl]="formControls.storeSettingType">
            <mat-option *ngFor="let setting of storeSetting" [value]="setting">
              {{ setting }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <ng-container *ngIf="formControls.storeSettingType.value === storeSettingTypes.Product">
          <mat-form-field class="sf-default-hint" appearance="fill">
            <mat-label>Select Product</mat-label>
            <mat-select [formControl]="formControls.storeProduct">
              <mat-option
                *ngFor="let storeProduct of storeProducts | keyvalue"
                [value]="storeProduct.key"
              >
                {{ storeProduct.value | humanize }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
      </ng-container>
    </ng-container>
    <div>
      <verify-button
        #verifyBtn
        stateManager
        [permissionAttribute]="permAttribute"
        [permissionTitle]="gameTitle"
        [disabled]="!isInEditMode"
      ></verify-button>
      <button
        mat-raised-button
        color="accent"
        (click)="submitChanges()"
        [disabled]="!isInEditMode || !formGroup.valid"
        stateManager
        [monitor]="submitWelcomeCenterTileMonitor"
        [verifyWithV2]="verifyBtn"
        monitorDisable
      >
        Submit Modification
        <button-spinner
          [monitor]="submitWelcomeCenterTileMonitor"
          defaultIcon="save"
        ></button-spinner>
      </button>
    </div>
  </div>
</form>
<span *ngIf="pullRequestUrl">
  A pull request for your changes has been created. You can access it
  <a target="_blank" href="{{ pullRequestUrl }}"> here </a>
</span>
