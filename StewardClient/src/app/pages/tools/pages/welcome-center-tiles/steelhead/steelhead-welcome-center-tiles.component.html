<mat-tab-group class="steward-layout-vertical-fill">
  <mat-tab label="Welcome Center Tiles">
    <ng-container>
      <mat-card>
        <mat-card-header>
          <mat-card-title>Welcome Center Tiles</mat-card-title>
          <mat-card-subtitle>{{ gameTitle | humanize }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <form *waitForMonitor="getListActionMonitor" [formGroup]="formGroup" class="sf-wrapper">
            <div class="sf-vertical">
              <div class="sf-horizontal">
                <mat-form-field class="sf-default-hint">
                  <mat-label>Select Welcome Center Tile</mat-label>
                  <mat-select
                    [formControl]="formControls.selectedWelcomeCenterTile"
                    [disabled]="isInEditMode"
                  >
                    <mat-optgroup label="Image Text Tile">
                      <mat-option
                        *ngFor="let friendlyName of friendlyNameImageTextList | keyvalue"
                        [value]="friendlyName.key"
                        (onSelectionChange)="welcomeCenterTileChanged($event, tileTypes.ImageText)"
                      >
                        {{ friendlyName.value }}
                      </mat-option>
                    </mat-optgroup>
                    <mat-optgroup label="Generic Popup Tile">
                      <mat-option
                        *ngFor="let friendlyName of friendlyNameGenericPopupList | keyvalue"
                        [value]="friendlyName.key"
                        (onSelectionChange)="
                          welcomeCenterTileChanged($event, tileTypes.GenericPopup)
                        "
                      >
                        {{ friendlyName.value }}
                      </mat-option>
                    </mat-optgroup>
                    <mat-optgroup label="Deeplink">
                      <mat-option
                        *ngFor="let friendlyName of friendlyNameDeeplinkList | keyvalue"
                        [value]="friendlyName.key"
                        (onSelectionChange)="welcomeCenterTileChanged($event, tileTypes.Deeplink)"
                      >
                        {{ friendlyName.value }}
                      </mat-option>
                    </mat-optgroup>
                  </mat-select>
                </mat-form-field>
                <button
                  *ngIf="!isInEditMode"
                  mat-raised-button
                  color="accent"
                  (click)="toggleEditMode()"
                  [disabled]="!formControls.selectedWelcomeCenterTile.value"
                  matTooltip="Update welcome center tile"
                  aria-label="Update welcome center tile"
                >
                  Edit
                </button>
                <button
                  *ngIf="isInEditMode"
                  mat-raised-button
                  color="warn"
                  (click)="revertEntryEdit()"
                  matTooltip="Cancel welcome center tile edit"
                  aria-label="Cancel welcome center tile edit"
                >
                  Undo
                </button>
              </div>
              <ng-container [ngSwitch]="currentWelcomeCenterTile?.derivedType">
                <steelhead-image-text-tile
                  *ngSwitchCase="tileTypes.ImageText"
                  [imageTextTile]="currentWelcomeCenterTile"
                  [tileId]="formControls.selectedWelcomeCenterTile.value"
                  [isInEditMode]="isInEditMode"
                  (newPullRequestCreated)="addPullRequest($event)"
                >
                </steelhead-image-text-tile>
                <steelhead-generic-popup-tile
                  *ngSwitchCase="tileTypes.GenericPopup"
                  [genericPopupTile]="currentWelcomeCenterTile"
                  [tileId]="formControls.selectedWelcomeCenterTile.value"
                  [isInEditMode]="isInEditMode"
                  (newPullRequestCreated)="addPullRequest($event)"
                >
                </steelhead-generic-popup-tile>
                <steelhead-deeplink-tile
                  *ngSwitchCase="tileTypes.Deeplink"
                  [deeplinkTile]="currentWelcomeCenterTile"
                  [tileId]="formControls.selectedWelcomeCenterTile.value"
                  [isInEditMode]="isInEditMode"
                  (newPullRequestCreated)="addPullRequest($event)"
                >
                </steelhead-deeplink-tile>
              </ng-container>
            </div>
          </form>
        </mat-card-content>
      </mat-card>
    </ng-container>
    <mat-card>
      <mat-card-header>
        <mat-card-title>Pending Content Modifications</mat-card-title>
        <mat-card-subtitle>{{ gameTitle | humanize }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <ng-container *waitForMonitor="getPullRequests">
          <table mat-table [dataSource]="existingPullRequestList">
            <ng-container matColumnDef="title">
              <th mat-header-cell *matHeaderCellDef>Title</th>
              <td mat-cell *matCellDef="let entry">
                <span>
                  <a target="_blank" href="{{ entry.webUrl }}"> {{ entry.title }} </a>
                </span>
              </td>
            </ng-container>
            <ng-container matColumnDef="creationDate">
              <th mat-header-cell *matHeaderCellDef>Creation Date</th>
              <td mat-cell *matCellDef="let entry">
                {{ entry.creationDateUtc | utcDate: 'short' }}
              </td>
            </ng-container>
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef>Actions</th>
              <td mat-cell *matCellDef="let entry">
                <div *waitForMonitor="entry.monitor">
                  <button
                    mat-raised-button
                    color="warn"
                    (click)="abandonPullRequest(entry)"
                    clickStop
                    stateManager
                    [verifyWith]="verifyAbandon"
                  >
                    Abandon
                    <mat-icon>delete</mat-icon>
                  </button>
                  <mat-checkbox
                    #verifyAbandon
                    stateManager
                    [permissionAttribute]="permAttribute"
                    [permissionTitle]="gameTitle"
                    >Verify</mat-checkbox
                  >
                </div>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
            <tr mat-row *matRowDef="let element; columns: columnsToDisplay"></tr>
          </table>
        </ng-container>
      </mat-card-content>
    </mat-card>
  </mat-tab>
  <mat-tab label="Localization">
    <create-localized-string
      [service]="localizationCreationServiceContract"
    ></create-localized-string>
  </mat-tab>
</mat-tab-group>
