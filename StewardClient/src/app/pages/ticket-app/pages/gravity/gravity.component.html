<ng-container *ngIf="!playerIdentity?.error; else identityErrorState">
  <gravity-player-sidebar-details
    [gamertag]="playerIdentity?.gamertag"
  ></gravity-player-sidebar-details>
  <gravity-gift-history-results-compact
    class="gift-history-container"
    [selectedPlayer]="playerIdentity"
    [usingPlayerIdentities]="true"
  ></gravity-gift-history-results-compact>
  <quick-actions class="top-spacing">
    <go-to-inventory-button
      [gameTitle]="gameTitle"
      [xuid]="playerIdentity?.xuid"
    ></go-to-inventory-button>
  </quick-actions>
</ng-container>

<ng-template #identityErrorState>
  <mat-card class="lookup-failed-card">
    <mat-card-title>Gravity Lookup Failed</mat-card-title>
    <mat-card-content>
      <p>"{{ lookupGamertag }}" does not exist.</p>
      <json-dump [input]="playerIdentity?.error">Lookup Error</json-dump>
    </mat-card-content>
  </mat-card>
</ng-template>
