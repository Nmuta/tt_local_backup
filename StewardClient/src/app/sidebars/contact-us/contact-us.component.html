<section *ngIf="isSubmitted">
  <mat-icon class="large-icon">check_circle</mat-icon>
  <h1>Team's link was generated for your feature/bug.</h1>
  <h3>
    Please be sure to click the submit button on teams and someone will get back to you shortly
  </h3>
  <button mat-raised-button color="accent" (click)="resetForm()">Submit Another Feature/Bug</button>
</section>

<section *ngIf="!isSubmitted">
  <h2>Contact Us</h2>
  <div class="sf-wrapper">
    <div class="sf-horizontal">
      <mat-button-toggle-group [(ngModel)]="selectedRequestType">
        <mat-button-toggle [value]="RequestType.Feature">Feature</mat-button-toggle>
        <mat-button-toggle [value]="RequestType.Bug">Bug</mat-button-toggle>
      </mat-button-toggle-group>
    </div>

    <form [formGroup]="formGroupFeature" *ngIf="selectedRequestType === RequestType.Feature">
      <div class="sf-horizontal">
        <mat-label appearance="fill"
          >Please include the following in the description:
          <ul>
            <li>New tool/Existing tool</li>
            <li>Game Title(s)</li>
          </ul>
        </mat-label>
      </div>
      <div class="sf-horizontal">
        <mat-form-field appearance="fill">
          <mat-label>Feature Description</mat-label>
          <textarea
            matInput
            [formControl]="formControlsFeature.description"
            dkTextareaAutosize
          ></textarea>
        </mat-form-field>
      </div>
      <div class="sf-horizontal">
        <mat-label appearance="fill">Is this business critical?</mat-label>
        <mat-button-toggle-group [formControl]="formControlsFeature.isBusinessCritital">
          <mat-button-toggle [value]="false">No</mat-button-toggle>
          <mat-button-toggle [value]="true">Yes</mat-button-toggle>
        </mat-button-toggle-group>
        <ng-container [ngTemplateOutlet]="isBusinessCriticalTooltip"></ng-container>
      </div>
      <div class="sf-horizontal">
        <mat-label appearance="fill">Estimated internal impact (employees)</mat-label>
        <mat-button-toggle-group [formControl]="formControlsFeature.internalImpact">
          <mat-button-toggle [value]="RequestImpact.Low">Low</mat-button-toggle>
          <mat-button-toggle [value]="RequestImpact.High">High</mat-button-toggle>
        </mat-button-toggle-group>
        <ng-container [ngTemplateOutlet]="internalImpactTooltip"></ng-container>
      </div>
      <div class="sf-horizontal">
        <mat-label appearance="fill">Estimated external impact (players)</mat-label>
        <mat-button-toggle-group [formControl]="formControlsFeature.externalImpact">
          <mat-button-toggle [value]="RequestImpact.Low">Low</mat-button-toggle>
          <mat-button-toggle [value]="RequestImpact.High">High</mat-button-toggle>
        </mat-button-toggle-group>
        <ng-container [ngTemplateOutlet]="externalImpactTooltip"></ng-container>
      </div>
      <div class="sf-horizontal">
        <button
          mat-raised-button
          color="accent"
          (click)="submitFeature()"
          [disabled]="!formGroupFeature.valid"
        >
          Submit Feature
        </button>
      </div>
    </form>

    <form
      [formGroup]="formGroupBug"
      class="sf-wrapper"
      *ngIf="selectedRequestType === RequestType.Bug"
    >
      <div class="sf-horizontal">
        <mat-label appearance="fill"
          >Please include the following in the description:
          <ul>
            <li>Tool</li>
            <li>Game Title</li>
            <li>Environment</li>
          </ul>
        </mat-label>
      </div>
      <div class="sf-horizontal">
        <mat-form-field appearance="fill">
          <mat-label>Bug Description</mat-label>
          <textarea
            matInput
            [formControl]="formControlsBug.description"
            dkTextareaAutosize
          ></textarea>
        </mat-form-field>
      </div>
      <div class="sf-horizontal">
        <mat-form-field appearance="fill">
          <mat-label>Reproduction Steps</mat-label>
          <textarea
            matInput
            [formControl]="formControlsBug.reproductionSteps"
            dkTextareaAutosize
          ></textarea>
        </mat-form-field>
      </div>
      <div class="sf-horizontal">
        <mat-label appearance="fill">Is this business critical?</mat-label>
        <mat-button-toggle-group [formControl]="formControlsBug.isBusinessCritital">
          <mat-button-toggle [value]="false">No</mat-button-toggle>
          <mat-button-toggle [value]="true">Yes</mat-button-toggle>
        </mat-button-toggle-group>
        <ng-container [ngTemplateOutlet]="isBusinessCriticalTooltip"></ng-container>
      </div>
      <div class="sf-horizontal">
        <mat-label appearance="fill">Estimated internal impact (employees)</mat-label>
        <mat-button-toggle-group [formControl]="formControlsBug.internalImpact">
          <mat-button-toggle [value]="RequestImpact.Low">Low</mat-button-toggle>
          <mat-button-toggle [value]="RequestImpact.High">High</mat-button-toggle>
        </mat-button-toggle-group>
        <ng-container [ngTemplateOutlet]="internalImpactTooltip"></ng-container>
      </div>
      <div class="sf-horizontal">
        <mat-label appearance="fill">Estimated external impact (players)</mat-label>
        <mat-button-toggle-group [formControl]="formControlsBug.externalImpact">
          <mat-button-toggle [value]="RequestImpact.Low">Low</mat-button-toggle>
          <mat-button-toggle [value]="RequestImpact.High">High</mat-button-toggle>
        </mat-button-toggle-group>
        <ng-container [ngTemplateOutlet]="externalImpactTooltip"></ng-container>
      </div>
      <div class="sf-horizontal">
        <mat-label appearance="fill">Is there a workaround?</mat-label>
        <mat-button-toggle-group [formControl]="formControlsBug.isWorkaround">
          <mat-button-toggle [value]="false">No</mat-button-toggle>
          <mat-button-toggle [value]="true">Yes</mat-button-toggle>
        </mat-button-toggle-group>
        <help-popover-icon [cardTitle]="">
          Test <br />
          <br />
          <b>Test</b>
        </help-popover-icon>
      </div>
      <div class="sf-horizontal">
        <button
          mat-raised-button
          color="accent"
          (click)="submitBug()"
          [disabled]="!formGroupBug.valid"
        >
          Submit Bug
        </button>
      </div>
    </form>
  </div>
</section>

<ng-template #isBusinessCriticalTooltip>
  <help-popover-icon [cardTitle]="">
    Test <br />
    <br />
    <b>Test</b>
  </help-popover-icon>
</ng-template>

<ng-template #externalImpactTooltip>
  <help-popover-icon [cardTitle]="">
    Test <br />
    <br />
    <b>Test</b>
  </help-popover-icon>
</ng-template>

<ng-template #internalImpactTooltip>
  <help-popover-icon [cardTitle]="">
    Test <br />
    <br />
    <b>Test</b>
  </help-popover-icon>
</ng-template>
