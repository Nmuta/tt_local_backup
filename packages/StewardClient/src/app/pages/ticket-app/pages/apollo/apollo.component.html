<ng-container *ngIf="!playerIdentity?.error; else identityErrorState">
  <apollo-player-sidebar-details
    [gamertag]="playerIdentity?.gamertag"
  ></apollo-player-sidebar-details>
  <apollo-user-flags
    [identity]="playerIdentity"
    [disabled]="true"
    class="top-spacing"
  ></apollo-user-flags>
  <mat-card class="top-spacing">
    <mat-card-title>Ban History</mat-card-title>
    <mat-card-subtitle>Apollo</mat-card-subtitle>
    <apollo-ban-history-compact [xuid]="playerIdentity?.xuid"></apollo-ban-history-compact>
  </mat-card>
  <apollo-gift-history-results-compact
    class="gift-history-container"
    [selectedPlayer]="playerIdentity"
    [usingPlayerIdentities]="true"
  ></apollo-gift-history-results-compact>
  <quick-actions class="top-spacing">
    <go-to-inventory-button
      [gameTitle]="gameTitle"
      [xuid]="playerIdentity?.xuid"
    ></go-to-inventory-button>
  </quick-actions>
</ng-container>

<ng-template #identityErrorState>
  <mat-card class="lookup-failed-card">
    <mat-card-title>Apollo Lookup Failed</mat-card-title>
    <mat-card-content>
      <p>"{{ lookupGamertag }}" does not exist.</p>
      <json-dump [input]="playerIdentity?.error">Lookup Error</json-dump>
    </mat-card-content>
  </mat-card>
</ng-template>
