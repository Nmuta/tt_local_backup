<section>
  <h3 class="title-bar">
    <mat-checkbox
      clickStop
      [ngModel]="groupIsComplete"
      [indeterminate]="groupIsIndeterminate"
      (ngModelChange)="updateGroup($event)"
      >{{ group.title }}</mat-checkbox
    >
    <span class="spacer"></span>
  </h3>
  <mat-accordion multi displayMode="flat">
    <ng-container *ngFor="let entry of group.entries">
      <mat-expansion-panel
        *ngIf="showInternal || entry?.tag !== ChangelogTag.Internal"
        [class.no-expand]="!(entry.longText?.length ?? false)"
        [hideToggle]="!(entry.longText?.length ?? false)"
        [expanded]="entry.longText?.length ?? false"
        class="top-border"
      >
        <mat-expansion-panel-header>
          <mat-panel-title>
            <mat-checkbox
              clickStop
              [ngModel]="isAcknowledgedEntry(entry)"
              (change)="updateEntry(entry, $event)"
            >
              {{ entry.shortText }}
            </mat-checkbox>
            <span class="sf-spacer"></span>
            <changelog-tag-details [entry]="entry"></changelog-tag-details>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <p *ngFor="let paragraph of entry.longText">{{ paragraph }}</p>
      </mat-expansion-panel>
    </ng-container>
  </mat-accordion>
</section>
